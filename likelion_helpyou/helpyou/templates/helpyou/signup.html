<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
    crossorigin="anonymous"
  />
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"
  ></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script defer src ="{% static 'js/signup.js' %}"></script>
  <link href="{% static 'css/signup.css' %}" rel="stylesheet" type="text/css">
    <title>회원가입</title>
</head>

    <body class="text">
        <main class="form-signup w-100 m-auto">
            <form method="post" class="post-form" action="{% url 'helpyou:signup' %}" onsubmit="return validateForm();">{% csrf_token %}
                {% include "helpyou/form_errors.html" %}
                <a class="navbar-brand" href="/">
                <img class="mb-4" src="https://cdn.discordapp.com/attachments/1131799837742997516/1133282568146518057/12-removebg-preview.png" alt="로고" width="150" height="60">
                </a>
                <h2>회원가입</h2>
                <br><br>
                <div class="mb-3">
                    <label for="username" class="ID_reg">아이디<span>*</span></label>
                    <div class="input-group">
                    <input type="text" class="form-control" name="username" id="username" placeholder="아이디를 입력해주세요." required>
                    <button type="button" class="btn btn-outline-success" id="checkDuplicate"
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                   data-bs-content="이곳에 사용할 아이디를 영문으로 입력하고 중복확인 버튼을 눌러주세요.">중복확인</button>
                    <span id="duplicateResult"></span>
{#                        <input type="hidden" id="idcheck" value="0"/> <!--idcheck 값이 0일 경우 id확인 불가능-->#}
                    </div>
                </div>
                <div class="mb-3">
                    <label for="password1" class="pass-reg">비밀번호<span>*</span></label>
                    <input type="password" class="form-control" name="password1" id="password1" placeholder="비밀번호를 입력해주세요.(8자리 이상)" required
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                    data-bs-content="이곳에 사용할 비밀번호를 입력해주세요.">
                </div>
                <div class="mb-3">
                    <label for="password2" class="pass-reg">비밀번호 확인<span>*</span></label>
                    <input type="password" class="form-control" name="password2" id="password2" placeholder="비밀번호를 다시 입력해주세요." required
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                    data-bs-content="이곳에 위에 입력한 비밀번호를 다시 입력해주세요.">
                </div>
                <div class="mb-3">
                <label for="fullname" class="ID_reg">이름<span>*</span></label>
                <div class="input-group">
                <input type="text" class="form-control" name="fullname" id="fullname" placeholder="'김상명'을 입력해주세요." required
                data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                   data-bs-content="이곳에 '김상명'을 입력해주세요."
                >
                </div>
                </div>
                <div class="mb-3">
                    <label for="address" class="address-reg">주소<span>*</span></label>
                    <input  class="form-control" name="address" id="address" placeholder="'충청남도 천안시 동남구 상명대길 31'을 입력해 주세요" required
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                   data-bs-content="이곳에 주소 '충청남도 천안시 동남구 상명대길 31'을 입력해주세요.">
                    <label for="detailed_address" class="address-reg">상세주소<span>*</span></label>
                    <input  class="form-control" name="detailed_address" id="detailed_address" placeholder="'상명대학교 천안캠퍼스 한누리관 805호'를 입력해 주세요" required
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                   data-bs-content="이곳에 상세 주소 '상명대학교 천안캠퍼스 한누리관 805호'을 입력해주세요.">
                </div>
                <div class="mb-3">
                    <label for="birth" class="birth-reg">생년월일</label>
                    <div class="input-group">
                        <div class="col-3">
                            <label for="year" class="birth-reg">년도</label>
                            <input  class="form-control" name="year" id="year" placeholder="년" required>
                        </div>

                        <div class="col-3">
                            <label for="month" class="birth-reg">월</label>
                            <input  class="form-control" name="month" id="month" placeholder="월" required>
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <div class="col-3">
                            <label for="day" class="birth-reg">일</label>
                            <input  class="form-control" name="day" id="day" placeholder="일" required
                            data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                            data-bs-content="이곳에 생년월일을 입력해주세요.(년도 4자릿수, 월 2자릿수, 일 2자릿수 입력해주세요)">
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="phone_number" class="number-reg" >전화번호<span>*</span></label>
                    <input  class="form-control" name="phone_number" id="phone_number" placeholder="'010-0000-0000'을 입력해주세요." required
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                            data-bs-content="이곳에 전화번호 '010-0000-0000'을 입력해주세요. '-'기호를 꼭 넣어주세요.">
                </div>
                <div class="mb-3">
                    <label for="email" class="email-reg">이메일<span>*</span></label>
                    <input  class="form-control" name="email" id="email" placeholder="이메일을 입력해주세요. 예) aaa@naver.com "
                    onclick="checkEmail()" required
                    data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                            data-bs-content="이곳에 이메일을 입력해주세요."
                    >
                </div>

                <button class="w-100 btn btn-lg btn btn-success" type="submit" onclick="registerMember()"
                data-bs-container="body" data-bs-toggle="popover" data-bs-placement="right"
                            data-bs-content="이곳을 눌러 회원가입을 완료 해주세요." id="Reg"
                >회원가입</button>
              {% if error_message1 %}
            <script>
            alert("{{ error_message1 }}");
            </script>
        {% endif %}
            </form>
        </main>
    </body>
    <script>

        // 아이디 중복확인
        const checkDuplicateButton = document.getElementById('checkDuplicate');
        const usernameInput = document.querySelector('input[name="username"]');
        const x = 0;

        checkDuplicateButton.addEventListener('click', async () => {
            const response = await fetch(`/check_duplicate_id/?id=${usernameInput.value}`);
            const data = await response.json();

            if (data.exists) {
                alert('이미 사용 중인 아이디입니다.');
                document.getElementById("username").focus();

            } else {
                alert('사용 가능한 아이디입니다.');
            }
        });


        function validateForm() {

            username = document.getElementById("username").value;
            if(username == "") {
                document.getElementById("username").focus();
                return false;
            }


            password1 = document.getElementById("password1").value;
            if(password1 == "") {
                document.getElementById("password1").focus();
                return false;
            }
            else if(password1.length < 8) {
                document.getElementById("password1").focus();
                return false;
            }

            password2 = document.getElementById("password2").value;
            if(password2 == "") {

                document.getElementById("password2").focus();
                return false;
            }

            if(password1 != password2) {
                document.getElementById("password2").focus();
                return false;
            }




            fullname = document.getElementById("fullname").value;
            if(fullname == "") {
                document.getElementById("fullname").focus();
                return false;
             }
            else if(fullname != "김상명") {

                document.getElementById("fullname").focus();
                return false;
             }


            address = document.getElementById("address").value;
            if(address == "") {
                document.getElementById("address").focus();
                return false;
            }
            else if(address != "충청남도 천안시 동남구 상명대길 31") {
                document.getElementById("address").focus();
                return false;
            }


            detailed_address = document.getElementById("detailed_address").value;
            if(detailed_address == "") {
                document.getElementById("detailed_address").focus();
                return false;
            }
            else if(detailed_address != "상명대학교 천안캠퍼스 한누리관 805호") {
                document.getElementById("detailed_address").focus();
                return false;
            }

            year = document.getElementById("year").value;
            if(year == "") {
                document.getElementById("year").focus();
                return false;
            }
            else if(year.length != 4) {
                document.getElementById("year").focus();
                return false;
            }

            month = document.getElementById("month").value;
            if(month == "") {
                document.getElementById("month").focus();
                return false;
            }
            else if(month.length != 2) {
                document.getElementById("month").focus();
                return false;
            }

            day = document.getElementById("day").value;
            if(day == "") {
                document.getElementById("day").focus();
                return false;
            }
            else if(day.length != 2) {
                document.getElementById("day").focus();
                return false;
            }

            phone_number = document.getElementById("phone_number").value;
            if(phone_number == "") {
                document.getElementById("phone_number").focus();
                return false;
            }
            else if(phone_number != "010-0000-0000") {
                document.getElementById("phone_number").focus();
                return false;
            }

            email = document.getElementById("email").value;
            if(email == "") {
                document.getElementById("email").focus();
                return false;
            }

            return true;
        }

        // 회원가입 버튼 눌렀을 때
        function registerMember() {

            username = document.getElementById("username").value;
            if(username == "") {
                alert("아이디 입력 필수입니다.");
                {#document.getElementById("username").focus();#}
                return false;
            }

            password1 = document.getElementById("password1").value;
            if(password1 == "") {
                alert("비밀번호 입력 필수입니다.");
                {#document.getElementById("password1").focus();#}
                return false;
            }
            else if(password1.length < 8) {
                alert("비밀번호는 8자 이상 입력해주세요.")
                {#document.getElementById("password1").focus();#}
                return false;
            }


            password2 = document.getElementById("password2").value;
            if(password2 == "") {
                alert("비밀번호 확인 필수입니다.");
                {#document.getElementById("password2").focus();#}
                return false;
            }

            if(password1 != password2) {
                alert("비밀번호가 일치하지 않습니다.");
                {#document.getElementById("password2").focus();#}
                return false;
            }



            fullname = document.getElementById("fullname").value;
            if(fullname == "") {
                alert("이름 입력 필수입니다.");
                {#document.getElementById("fullname").focus();#}
                return;
             }
            else if(fullname != "김상명") {
                alert("이름을 '김상명'으로 입력해주세요.");
                document.getElementById("fullname").focus();
                return;
             }

            address = document.getElementById("address").value;
            if(address == "") {
                alert("주소 입력 필수입니다.");
                {#document.getElementById("address").focus();#}
                return;
            }
            else if(address != "충청남도 천안시 동남구 상명대길 31") {
                alert("주소를 '충청남도 천안시 동남구 상명대길 31'으로 입력해주세요.");
                {#document.getElementById("address").focus();#}
                return;
            }


            detailed_address = document.getElementById("detailed_address").value;
            if(detailed_address == "") {
                alert("상세 주소 입력 필수입니다.");
                {#document.getElementById("detailed_address").focus();#}
                return;
            }
            else if(detailed_address != "상명대학교 천안캠퍼스 한누리관 805호") {
                alert("상세주소를 '상명대학교 천안캠퍼스 한누리관 805호'로 입력해주세요.");
                {#document.getElementById("detailed_address").focus();#}
                return;
            }

            year = document.getElementById("year").value;
            if(year == "") {
                alert("년도 입력 필수입니다.");
                {#document.getElementById("year").focus();#}
                return;
            }
            else if(year.length != 4) {
                alert("년도에 네 자릿수로 작성해주세요.");
                {#document.getElementById("detailed_address").focus();#}
                return;
            }

            month = document.getElementById("month").value;
            if(month == "") {
                alert("월 입력 필수입니다.");
                {#document.getElementById("month").focus();#}
                return;
            }
            else if(month.length != 2) {
                alert("월에 두 자릿수로 작성해주세요.");
                {#document.getElementById("detailed_address").focus();#}
                return;
            }

            day = document.getElementById("day").value;
            if(day == "") {
                alert("일 입력 필수입니다.");
                {#document.getElementById("day").focus();#}
                return;
            }
            else if(day.length != 2) {
                alert("일에 두 자릿수로 작성해주세요.");
                {#document.getElementById("detailed_address").focus();#}
                return;
            }

            phone_number = document.getElementById("phone_number").value;
            if(phone_number == "") {
                alert("전화번호 입력 필수입니다.");
                {#document.getElementById("phone_number").focus();#}
                return;
            }
            else if(phone_number != "010-0000-0000") {
                alert("전화번호를 '010-0000-0000'로 입력해주세요.");
                {#document.getElementById("phone_number").focus();#}
                return;
            }

            email = document.getElementById("email").value;
            if(email == "") {
                alert("이메일 입력 필수입니다.");
                {#document.getElementById("email").focus();#}
                return;
            }



        }

    </script>


</html>